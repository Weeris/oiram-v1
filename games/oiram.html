<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Super Oiram-V1</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; touch-action: manipulation; }
        body { background: #1a1a2e; display: flex; flex-direction: column; justify-content: center; align-items: center; min-height: 100vh; font-family: sans-serif; overflow: hidden; user-select: none; }
        #gameContainer { position: relative; background: #5c94fc; border: 4px solid #1e3a5f; border-radius: 8px; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4); overflow: hidden; }
        #gameCanvas { display: block; background: linear-gradient(180deg, #5c94fc 0%, #87ceeb 60%, #90EE90 100%); }
        #ui { position: absolute; top: 8px; left: 10px; right: 10px; display: flex; justify-content: space-between; font-size: 16px; color: white; text-shadow: 2px 2px 0 #000; pointer-events: none; font-weight: bold; z-index: 10; }
        #overlay { position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0, 0, 0, 0.75); display: flex; flex-direction: column; justify-content: center; align-items: center; color: white; z-index: 100; }
        #overlay.hidden { display: none; }
        #overlay h1 { font-size: 36px; margin-bottom: 15px; text-shadow: 3px 3px 0 #e3001b; }
        #overlay p { font-size: 18px; margin-bottom: 25px; color: #ffcc00; }
        #overlay button { padding: 15px 50px; font-size: 20px; font-weight: bold; color: white; background: linear-gradient(180deg, #e3001b 0%, #b30000 100%); border: 3px solid #fff; border-radius: 10px; cursor: pointer; box-shadow: 0 4px 0 #800000; }
        #overlay button:active { transform: translateY(2px); box-shadow: 0 2px 0 #800000; }
        #touchControls { display: none; position: absolute; bottom: 20px; left: 20px; z-index: 20; }
        #touchControls.active { display: flex; flex-direction: column; align-items: flex-start; }
        .touch-btn { width: 65px; height: 65px; border-radius: 50%; background: rgba(255, 255, 255, 0.3); border: 4px solid rgba(255, 255, 255, 0.6); color: white; font-size: 24px; display: flex; justify-content: center; align-items: center; cursor: pointer; transition: all 0.1s ease; margin: 5px; box-shadow: 0 4px 8px rgba(0,0,0,0.4); font-weight: bold; }
        .touch-btn:active, .touch-btn.active { background: rgba(255, 255, 255, 0.6); transform: scale(0.92); }
        .touch-row { display: flex; flex-direction: column; align-items: flex-start; }
        .touch-dpad { display: flex; gap: 8px; }
        .touch-action { display: flex; gap: 8px; margin-bottom: 8px; }
        #pauseBtn { width: 50px; height: 50px; font-size: 18px; position: absolute; top: 10px; right: 10px; background: rgba(0, 0, 0, 0.5); display: none; z-index: 25; border-radius: 50%; border: 3px solid rgba(255,255,255,0.3); }
        @media (max-width: 768px) {
            #gameContainer { width: 100% !important; height: auto !important; border-radius: 0; border: none; }
            #gameCanvas { width: 100% !important; height: auto !important; }
            #overlay h1 { font-size: 32px; }
            #overlay button { padding: 12px 40px; font-size: 18px; }
            #touchControls { display: flex; }
            #ui { font-size: 14px; padding: 5px 10px; }
            .touch-btn { width: 60px; height: 60px; font-size: 22px; }
        }
    </style>
</head>
<body>
    <div id="gameContainer">
        <canvas id="gameCanvas" width="800" height="480"></canvas>
        <div id="ui">
            <div>SCORE: <span id="score">0</span></div>
            <div>WORLD <span style="color:#ffcc00">1-1</span></div>
            <div>COINS: <span id="coins">0</span></div>
            <div style="color: #ffcc00">‚òÖ <span id="highScore">0</span></div>
            <div>LIVES: <span id="lives">3</span></div>
        </div>
        <button id="pauseBtn">‚è∏</button>
        <div id="touchControls">
            <div class="touch-row">
                <div class="touch-action">
                    <button class="touch-btn" id="btnJump">A</button>
                </div>
                <div class="touch-dpad">
                    <button class="touch-btn" id="btnLeft">‚óÄ</button>
                    <button class="touch-btn" id="btnRight">‚ñ∂</button>
                </div>
            </div>
        </div>
        <div id="overlay">
            <h1 style="font-size: 48px; margin-bottom: 20px;">üçÑ OIRAM üçÑ</h1>
            <p style="font-size: 20px; margin-bottom: 30px;">Collect coins & reach the flag!</p>
            <button id="startBtn">START</button>
        </div>
    </div>
    <script>
        // Config
        const CONFIG = { GRAVITY: 0.6, FRICTION: 0.88, PLAYER_SPEED: 4.5, JUMP_FORCE: -13, GROUND_Y: 400 };
        
        // High Score
        let highScore = 0;
        try { highScore = parseInt(localStorage.getItem('oiram_highscore')) || 0; } catch(e) {}
        
        // Game State
        const game = { canvas: null, ctx: null, running: false, score: 0, highScore: highScore, lives: 3, keys: {}, camera: { x: 0 }, worldWidth: 3200, isMobile: false, canvasScale: 1, coins: 0, time: 300, gameOver: false };
        
        // Player
        const player = { x: 100, y: 300, width: 28, height: 32, vx: 0, vy: 0, onGround: false, facing: 1, frame: 0, frameTimer: 0 };
        
        // Platforms
        const platforms = [
            { x: 0, y: 400, width: 3200, height: 80, type: 'ground' },
            { x: 250, y: 320, width: 80, height: 24, type: 'brick' },
            { x: 400, y: 280, width: 100, height: 24, type: 'brick' },
            { x: 550, y: 240, width: 80, height: 24, type: 'question', content: 'coin' },
            { x: 700, y: 300, width: 120, height: 24, type: 'brick' },
            { x: 900, y: 260, width: 80, height: 24, type: 'brick' },
            { x: 1050, y: 220, width: 100, height: 24, type: 'question', content: 'coin' },
            { x: 1250, y: 300, width: 80, height: 24, type: 'brick' },
            { x: 1400, y: 340, width: 60, height: 60, type: 'pipe' },
            { x: 1550, y: 280, width: 80, height: 24, type: 'brick' },
            { x: 1700, y: 240, width: 100, height: 24, type: 'question', content: 'coin' },
            { x: 1900, y: 200, width: 80, height: 24, type: 'brick' },
            { x: 2100, y: 280, width: 120, height: 24, type: 'brick' },
            { x: 2300, y: 320, width: 80, height: 24, type: 'brick' },
            { x: 2500, y: 360, width: 60, height: 40, type: 'brick' },
            { x: 2650, y: 300, width: 60, height: 100, type: 'brick' },
            { x: 2800, y: 240, width: 60, height: 160, type: 'brick' },
        ];
        
        // Enemies (Turtles!)
        const enemies = [
            { x: 380, y: 368, width: 30, height: 30, vx: -1, alive: true, type: 'turtle', shell: false },
            { x: 650, y: 368, width: 30, height: 30, vx: -1.2, alive: true, type: 'turtle', shell: false },
            { x: 980, y: 368, width: 30, height: 30, vx: -0.8, alive: true, type: 'turtle', shell: false },
            { x: 1200, y: 368, width: 30, height: 30, vx: -1.5, alive: true, type: 'turtle', shell: false },
            { x: 1480, y: 368, width: 30, height: 30, vx: -1, alive: true, type: 'turtle', shell: false },
            { x: 1750, y: 368, width: 30, height: 30, vx: -1.2, alive: true, type: 'turtle', shell: false },
            { x: 2050, y: 368, width: 30, height: 30, vx: -0.8, alive: true, type: 'turtle', shell: false },
            { x: 2350, y: 368, width: 30, height: 30, vx: -1.3, alive: true, type: 'turtle', shell: false },
        ];
        
        // Coins
        const coins = [
            { x: 280, y: 280, collected: false }, { x: 320, y: 280, collected: false },
            { x: 430, y: 240, collected: false }, { x: 470, y: 240, collected: false },
            { x: 580, y: 200, collected: false },
            { x: 730, y: 260, collected: false }, { x: 770, y: 260, collected: false },
            { x: 930, y: 220, collected: false }, { x: 970, y: 220, collected: false },
            { x: 1080, y: 180, collected: false },
            { x: 1280, y: 260, collected: false }, { x: 1320, y: 260, collected: false },
            { x: 1580, y: 240, collected: false },
            { x: 1730, y: 200, collected: false }, { x: 1770, y: 200, collected: false },
            { x: 1930, y: 160, collected: false },
            { x: 2130, y: 240, collected: false }, { x: 2170, y: 240, collected: false },
            { x: 2330, y: 280, collected: false },
            { x: 2530, y: 320, collected: false },
        ];
        
        // Decorations
        const hills = [
            { x: 50, y: 400, width: 120, height: 60 },
            { x: 400, y: 400, width: 160, height: 80 },
            { x: 900, y: 400, width: 100, height: 50 },
            { x: 1500, y: 400, width: 140, height: 70 },
            { x: 2200, y: 400, width: 120, height: 60 },
            { x: 2800, y: 400, width: 180, height: 90 },
        ];
        
        const clouds = [
            { x: 80, y: 50, size: 1 }, { x: 300, y: 80, size: 0.8 }, { x: 550, y: 40, size: 1.2 },
            { x: 850, y: 70, size: 1 }, { x: 1200, y: 55, size: 0.9 }, { x: 1600, y: 65, size: 1.1 },
            { x: 2000, y: 45, size: 1 }, { x: 2400, y: 75, size: 0.85 }, { x: 2900, y: 60, size: 1.15 },
        ];
        
        const flagpole = { x: 3050, y: 120 };
        
        // Init Canvas
        function initCanvas() {
            game.canvas = document.getElementById('gameCanvas');
            game.ctx = game.canvas.getContext('2d');
            game.isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) || window.innerWidth <= 768;
            setupTouchControls();
            resizeCanvas();
            window.addEventListener('resize', resizeCanvas);
        }
        
        function resizeCanvas() {
            const container = document.getElementById('gameContainer');
            const maxWidth = Math.min(window.innerWidth - 20, 800);
            const maxHeight = Math.min(window.innerHeight - 150, 480);
            const scaleX = maxWidth / 800;
            const scaleY = maxHeight / 480;
            game.canvasScale = Math.min(scaleX, scaleY);
            game.canvas.width = 800 * game.canvasScale;
            game.canvas.height = 480 * game.canvasScale;
            container.style.width = game.canvas.width + 'px';
            container.style.height = game.canvas.height + 'px';
        }
        
        function setupTouchControls() {
            const btnLeft = document.getElementById('btnLeft');
            const btnRight = document.getElementById('btnRight');
            const btnJump = document.getElementById('btnJump');
            const btnPause = document.getElementById('pauseBtn');
            
            function addTouch(element, key) {
                element.addEventListener('touchstart', function(e) { e.preventDefault(); game.keys[key] = true; });
                element.addEventListener('touchend', function(e) { e.preventDefault(); game.keys[key] = false; });
                element.addEventListener('mousedown', function() { game.keys[key] = true; });
                element.addEventListener('mouseup', function() { game.keys[key] = false; });
            }
            
            addTouch(btnLeft, 'ArrowLeft');
            addTouch(btnRight, 'ArrowRight');
            addTouch(btnJump, 'Space');
            
            btnPause.addEventListener('click', function() {
                if (game.running) {
                    game.running = false;
                    cancelAnimationFrame(game.animationId);
                    document.querySelector('#overlay h1').textContent = '‚è∏ PAUSED';
                    document.querySelector('#overlay p').textContent = 'Tap RESUME to continue';
                    document.getElementById('startBtn').textContent = 'RESUME';
                    document.getElementById('overlay').classList.remove('hidden');
                } else {
                    startGame();
                }
            });
        }
        
        document.addEventListener('keydown', function(e) {
            game.keys[e.code] = true;
            if (['Space', 'ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight'].includes(e.code)) e.preventDefault();
        });
        
        document.addEventListener('keyup', function(e) { game.keys[e.code] = false; });
        
        function rectCollision(a, b) {
            return a.x < b.x + b.width && a.x + a.width > b.x && a.y < b.y + b.height && a.y + a.height > b.y;
        }
        
        function resetGame() {
            player.x = 100; player.y = 300; player.vx = 0; player.vy = 0; player.onGround = false; player.facing = 1;
            enemies.forEach(function(e, i) { 
                e.x = [380, 650, 980, 1200, 1480, 1750, 2050, 2350][i]; 
                e.y = 368; 
                e.vx = [-1, -1.2, -0.8, -1.5, -1, -1.2, -0.8, -1.3][i]; 
                e.alive = true; 
                e.shell = false;
            });
            coins.forEach(function(c) { c.collected = false; });
            platforms.forEach(function(p) { if (p.type === 'question') p.hit = false; });
            game.score = 0; game.lives = 3; game.coins = 0; game.time = 300; game.camera.x = 0; game.gameOver = false;
            updateUI();
        }
        
        function updateUI() {
            document.getElementById('score').textContent = game.score;
            document.getElementById('highScore').textContent = game.highScore;
            document.getElementById('coins').textContent = game.coins;
            document.getElementById('lives').textContent = game.lives;
        }
        
        function saveHighScore() {
            if (game.score > game.highScore) {
                game.highScore = game.score;
                try { localStorage.setItem('oiram_highscore', game.highScore); } catch(e) {}
            }
        }
        
        function startGame() {
            document.getElementById('overlay').classList.add('hidden');
            game.running = true;
            if (game.gameOver) {
                resetGame();
            }
            gameLoop();
        }
        
        function gameLoop() {
            if (!game.running) return;
            update();
            render();
            game.animationId = requestAnimationFrame(gameLoop);
        }
        
        function update() {
            if (Math.random() < 0.016) game.time--;
            
            // Player movement
            if (game.keys['ArrowLeft']) { player.vx = -CONFIG.PLAYER_SPEED; player.facing = -1; }
            else if (game.keys['ArrowRight']) { player.vx = CONFIG.PLAYER_SPEED; player.facing = 1; }
            else { player.vx *= CONFIG.FRICTION; }
            
            if (game.keys['Space'] && player.onGround) { player.vy = CONFIG.JUMP_FORCE; player.onGround = false; }
            
            player.vy += CONFIG.GRAVITY;
            player.x += player.vx;
            player.y += player.vy;
            player.onGround = false;
            
            // Animation
            if (Math.abs(player.vx) > 0.5 && player.onGround) {
                player.frameTimer++;
                if (player.frameTimer > 8) { player.frame = (player.frame + 1) % 3; player.frameTimer = 0; }
            } else { player.frame = 0; }
            
            // Platform collision
            platforms.forEach(function(p) {
                if (rectCollision(player, p)) {
                    if (player.vy > 0 && player.y + player.height - player.vy <= p.y + 8) {
                        player.y = p.y - player.height; player.vy = 0; player.onGround = true;
                        if (p.type === 'question' && !p.hit) {
                            p.hit = true;
                            game.score += 100; game.coins++; updateUI();
                        }
                    } else if (player.vy < 0 && player.y - player.vy >= p.y + p.height - 8) {
                        player.y = p.y + p.height; player.vy = 0;
                        if (p.type === 'question' && !p.hit) {
                            p.hit = true;
                            game.score += 100; game.coins++; updateUI();
                        }
                    } else {
                        if (player.vx > 0) player.x = p.x - player.width;
                        else if (player.vx < 0) player.x = p.x + p.width;
                        player.vx = 0;
                    }
                }
            });
            
            if (player.x < 0) player.x = 0;
            if (player.y > CONFIG.GROUND_Y + 100) { playerDeath(); }
            
            // Enemies
            enemies.forEach(function(e) {
                if (!e.alive) return;
                e.x += e.vx;
                
                // Bounce off walls
                platforms.forEach(function(p) {
                    if (p.type !== 'question' && e.x <= p.x + 5) { e.x = p.x + 5; e.vx = Math.abs(e.vx); }
                    if (p.type !== 'question' && e.x + e.width >= p.x + p.width - 5) { e.x = p.x + p.width - e.width - 5; e.vx = -Math.abs(e.vx); }
                });
                
                if (rectCollision(player, e)) {
                    if (player.vy > 0 && player.y + player.height < e.y + e.height / 2 + 5) {
                        if (e.shell) {
                            e.alive = false; game.score += 400; updateUI();
                        } else {
                            e.shell = true; e.vx = 0; player.vy = -8; game.score += 200; updateUI();
                        }
                    } else {
                        playerDeath();
                    }
                }
            });
            
            // Coins
            coins.forEach(function(c) {
                if (!c.collected) {
                    var coinRect = { x: c.x, y: c.y, width: 20, height: 24 };
                    if (rectCollision(player, coinRect)) { c.collected = true; game.score += 50; game.coins++; updateUI(); }
                }
            });
            
            // Win
            if (player.x > 3000) {
                game.running = false;
                saveHighScore();
                game.gameOver = true;
                document.querySelector('#overlay h1').textContent = 'üèÜ YOU WIN!';
                document.querySelector('#overlay p').textContent = 'Score: ' + game.score + ' | Time: ' + game.time + 's';
                document.getElementById('startBtn').textContent = 'PLAY AGAIN';
                document.getElementById('overlay').classList.remove('hidden');
            }
            
            var targetX = player.x - game.canvas.width / 3 / game.canvasScale;
            game.camera.x += (targetX - game.camera.x) * 0.1;
            game.camera.x = Math.max(0, Math.min(game.camera.x, game.worldWidth - game.canvas.width / game.canvasScale));
        }
        
        function playerDeath() {
            game.lives--;
            updateUI();
            if (game.lives <= 0) {
                game.running = false;
                saveHighScore();
                game.gameOver = true;
                document.querySelector('#overlay h1').textContent = 'üíÄ GAME OVER';
                document.querySelector('#overlay p').textContent = 'Score: ' + game.score + ' | Best: ' + game.highScore;
                document.getElementById('startBtn').textContent = 'PLAY AGAIN';
                document.getElementById('overlay').classList.remove('hidden');
            } else {
                player.x = 100; player.y = 300; player.vx = 0; player.vy = 0; game.camera.x = 0;
            }
        }
        
        function render() {
            var ctx = game.ctx;
            var scale = game.canvasScale;
            ctx.fillStyle = '#5c94fc';
            ctx.fillRect(0, 0, game.canvas.width, game.canvas.height);
            ctx.save();
            ctx.scale(scale, scale);
            
            // Hills
            ctx.fillStyle = '#228B22';
            hills.forEach(function(h) {
                var x = h.x - game.camera.x * 0.5;
                if (x + h.width > 0 && x < 800) {
                    ctx.beginPath();
                    ctx.arc(x + h.width/2, h.y + h.height, h.width/2, 0, Math.PI, true);
                    ctx.fill();
                }
            });
            
            // Clouds
            ctx.fillStyle = 'white';
            clouds.forEach(function(c) {
                var x = c.x - game.camera.x * 0.3;
                ctx.beginPath(); ctx.arc(x, c.y, 22 * c.size, 0, Math.PI * 2); ctx.fill();
                ctx.beginPath(); ctx.arc(x + 22 * c.size, c.y - 8 * c.size, 25 * c.size, 0, Math.PI * 2); ctx.fill();
                ctx.beginPath(); ctx.arc(x + 48 * c.size, c.y, 20 * c.size, 0, Math.PI * 2); ctx.fill();
            });
            
            // Platforms
            platforms.forEach(function(p) {
                var x = p.x - game.camera.x;
                if (x + p.width < -20 || x > 820) return;
                if (p.type === 'ground') {
                    ctx.fillStyle = '#8B4513';
                    ctx.fillRect(x, p.y, p.width, p.height);
                    ctx.fillStyle = '#228B22';
                    ctx.fillRect(x, p.y, p.width, 12);
                    ctx.fillStyle = '#228B22';
                    for (var gx = x; gx < x + p.width; gx += 16) {
                        ctx.beginPath(); ctx.arc(gx + 8, p.y + 6, 4, 0, Math.PI * 2); ctx.fill();
                    }
                } else if (p.type === 'brick') {
                    ctx.fillStyle = '#CD853F';
                    ctx.fillRect(x, p.y, p.width, p.height);
                    ctx.strokeStyle = '#8B4513';
                    ctx.lineWidth = 2;
                    for (var bx = 0; bx < p.width; bx += 24) {
                        for (var by = 0; by < p.height; by += 16) {
                            ctx.strokeRect(x + bx, p.y + by, 24, 16);
                        }
                    }
                } else if (p.type === 'pipe') {
                    ctx.fillStyle = '#228B22';
                    ctx.fillRect(x + 4, p.y + 20, p.width - 8, p.height - 20);
                    ctx.fillStyle = '#32CD32';
                    ctx.fillRect(x, p.y, p.width, 25);
                } else if (p.type === 'question') {
                    ctx.fillStyle = p.hit ? '#8B4513' : '#FFD700';
                    ctx.fillRect(x, p.y, p.width, p.height);
                    ctx.fillStyle = p.hit ? '#CD853F' : '#000';
                    ctx.font = 'bold 16px Arial';
                    ctx.fillText(p.hit ? '' : '?', x + 10, p.y + 18);
                }
            });
            
            // Coins
            var coinAnim = Math.sin(Date.now() / 150) * 2;
            coins.forEach(function(c) {
                if (c.collected) return;
                var x = c.x - game.camera.x;
                if (x < -20 || x > 820) return;
                ctx.fillStyle = '#FFD700';
                ctx.beginPath(); ctx.ellipse(x + 10, c.y + coinAnim + 12, 8, 10, 0, 0, Math.PI * 2); ctx.fill();
                ctx.fillStyle = '#FFF8DC';
                ctx.beginPath(); ctx.ellipse(x + 7, c.y + coinAnim + 9, 3, 4, 0, 0, Math.PI * 2); ctx.fill();
            });
            
            // Enemies (Turtles!)
            enemies.forEach(function(e) {
                if (!e.alive) return;
                var x = e.x - game.camera.x;
                if (x < -30 || x > 830) return;
                
                if (e.shell) {
                    // Shell (upside down)
                    ctx.fillStyle = '#228B22';
                    ctx.beginPath(); ctx.ellipse(x + 15, e.y + 20, 15, 10, 0, 0, Math.PI * 2); ctx.fill();
                    ctx.fillStyle = '#006400';
                    ctx.beginPath(); ctx.arc(x + 15, e.y + 20, 8, 0, Math.PI * 2); ctx.fill();
                } else {
                    // Walking turtle
                    var legAnim = Math.sin(Date.now() / 100) * 2;
                    // Shell
                    ctx.fillStyle = '#228B22';
                    ctx.beginPath(); ctx.ellipse(x + 15, e.y + 15, 14, 12, 0, 0, Math.PI * 2); ctx.fill();
                    // Head
                    ctx.fillStyle = '#9ACD32';
                    var headX = e.vx > 0 ? x + 28 : x + 2;
                    ctx.beginPath(); ctx.arc(headX, e.y + 10, 8, 0, Math.PI * 2); ctx.fill();
                    // Eyes
                    ctx.fillStyle = 'black';
                    ctx.beginPath(); ctx.arc(headX + (e.vx > 0 ? 2 : -2), e.y + 8, 2, 0, Math.PI * 2); ctx.fill();
                    // Legs
                    ctx.fillStyle = '#9ACD32';
                    ctx.fillRect(x + 5, e.y + 25, 6, 6 + legAnim);
                    ctx.fillRect(x + 19, e.y + 25, 6, 6 - legAnim);
                }
            });
            
            // Flagpole
            var fx = flagpole.x - game.camera.x;
            if (fx > -30 && fx < 830) {
                ctx.fillStyle = '#00AA00';
                ctx.fillRect(fx + 6, flagpole.y, 8, 280);
                ctx.fillStyle = '#00FF00';
                ctx.beginPath(); ctx.arc(fx + 10, flagpole.y, 12, 0, Math.PI * 2); ctx.fill();
                ctx.fillStyle = '#FF0000';
                ctx.beginPath();
                ctx.moveTo(fx + 14, flagpole.y + 25);
                ctx.lineTo(fx + 50, flagpole.y + 40);
                ctx.lineTo(fx + 14, flagpole.y + 55);
                ctx.fill();
            }
            
            // Player
            var px = player.x - game.camera.x;
            var legOffset = player.onGround && Math.abs(player.vx) > 0.5 ? Math.sin(Date.now() / 60) * 4 : 0;
            
            ctx.fillStyle = '#0000CD';
            ctx.fillRect(px + 4, player.y + 22, 6, 10 + legOffset);
            ctx.fillRect(px + 18, player.y + 22, 6, 10 - legOffset);
            
            ctx.fillStyle = '#FF0000';
            ctx.fillRect(px, py, 28, 14);
            ctx.fillRect(px + 2, py + 14, 24, 10);
            ctx.fillStyle = '#0000FF';
            ctx.fillRect(px + 2, py + 24, 24, 8);
            ctx.fillStyle = '#FFE4C4';
            ctx.beginPath(); ctx.arc(px + 14, py - 2, 12, 0, Math.PI * 2); ctx.fill();
            ctx.fillStyle = '#FF0000';
            ctx.fillRect(px + 2, py - 10, 24, 8);
            ctx.fillRect(px - 2, py - 6, 8, 4);
            ctx.fillStyle = 'black';
            if (player.facing > 0) {
                ctx.beginPath(); ctx.arc(px + 18, py - 2, 3, 0, Math.PI * 2); ctx.fill();
            } else {
                ctx.beginPath(); ctx.arc(px + 10, py - 2, 3, 0, Math.PI * 2); ctx.fill();
            }
            
            ctx.restore();
        }
        
        initCanvas();
        updateUI();
        document.getElementById('startBtn').addEventListener('click', startGame);
    </script>
</body>
</html>
